this.telegramApps=this.telegramApps||{};this.telegramApps.sdk=function(o){"use strict";function no(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Om(e){}function qm(e){}function nl(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function rl(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function ve(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,u=(s==null?void 0:s.received)??rl(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??nl(e.reference,c.lang)??(l?(c.lang,void 0):null)??r.message??(c.lang,void 0);p&&(c.message=typeof p=="function"?p(c):p),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function Z(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},no())}}}function ol(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var sl=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function jt(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Je(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function ro(){return{kind:"schema",type:"any",reference:ro,expects:"any",async:!1,get"~standard"(){return Z(this)},"~run"(e){return e.typed=!0,e}}}function Dt(e){return{kind:"schema",type:"boolean",reference:Dt,expects:"boolean",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:ve(this,"type",t,n),t}}}function Nt(e){return{kind:"schema",type:"function",reference:Nt,expects:"Function",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:ve(this,"type",t,n),t}}}function W(e,t){return{kind:"schema",type:"loose_object",reference:W,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){var s;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in i?i[a]:jt(u),l=u["~run"]({value:c},r);if(l.issues){const p={type:"object",origin:"value",input:i,key:a,value:c};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(s=n.issues)==null||s.push(d);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(ve(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const a in i)ol(i,a)&&!(a in this.entries)&&(n.value[a]=i[a])}else ve(this,"type",n,r);return n}}}function Be(e,t){return{kind:"schema",type:"nullish",reference:Be,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Z(this)},"~run"(n,r){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=jt(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Vt(e){return{kind:"schema",type:"number",reference:Vt,expects:"number",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:ve(this,"type",t,n),t}}}function Lt(e,t){return{kind:"schema",type:"optional",reference:Lt,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Z(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=jt(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function re(e){return{kind:"schema",type:"string",reference:re,expects:"string",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:ve(this,"type",t,n),t}}}function oo(){return{kind:"schema",type:"unknown",reference:oo,expects:"unknown",async:!1,get"~standard"(){return Z(this)},"~run"(e){return e.typed=!0,e}}}function Rt(e,t,n){const r=e["~run"]({value:t},no(n));if(r.issues)throw new sl(r.issues);return r.value}function so(...e){return{...e[0],pipe:e,get"~standard"(){return Z(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function io(e){return Je(W({TelegramWebviewProxy:W({postEvent:Nt()})}),e)}function ao(){try{return window.self!==window.top}catch{return!0}}var il=Object.defineProperty,al=(e,t,n)=>t in e?il(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uo=(e,t,n)=>al(e,typeof t!="symbol"?t+"":t,n);function ul(e){return t=>t instanceof e}function co(e,t){t||(t=[]);class n extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,ul(n)]}const[cl,Im]=co("CancelledError","Promise was canceled"),[ll,jm]=co("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),lo=Symbol("Resolved");function po(e){return Array.isArray(e)&&e[0]===lo}function pl(e){return[lo,e]}function fo(e,t){return e.reject=t.reject,e.abort=t.abort,e}let mo=class xr extends Promise{constructor(t,n){let r,s;super((i,a)=>{let u,c;typeof t=="function"?(u=t,c=n):c=t;const l=[],p=f=>(...R)=>{const ne=f(...R);return l.forEach(Xr=>Xr()),ne},d=new AbortController,{signal:h}=d;s=f=>{!h.aborted&&d.abort(f)};const m=()=>h.reason,T=f=>{const R=()=>{f(m())};h.addEventListener("abort",R,!0);const ne=()=>{h.removeEventListener("abort",R,!0)};return l.push(ne),ne},Te=p(f=>{i(f),s(pl(f))});r=p(f=>{a(f),s(f)}),c||(c={});const{abortSignal:B,rejectOnAbort:fe=!0}=c;if(B)if(B.aborted){const{reason:f}=B;if(fe)return r(f);s(f)}else{const f=()=>{s(B.reason)};B.addEventListener("abort",f),l.push(()=>{B.removeEventListener("abort",f)})}fe&&T(a);const{timeout:A}=c;if(A){const f=setTimeout(()=>{s(new ll(A))},A);l.push(()=>{clearTimeout(f)})}const C=()=>h.aborted,L=()=>po(m()),F=()=>{const f=m();return po(f)?f[1]:void 0};try{const f=u&&u(Te,r,{abortReason:m,abortSignal:h,isAborted:C,isResolved:L,onAborted:T,onResolved:R=>T(()=>{L()&&R(F())}),resolved:F,throwIfAborted(){if(C())throw m()}});f instanceof Promise&&f.catch(r)}catch(f){r(f)}}),uo(this,"abort"),uo(this,"reject"),this.abort=s,this.reject=r}static fn(t,n){return new xr(async(r,s,i)=>{try{r(await t(i))}catch(a){s(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new xr((n,r)=>{r(t)})}cancel(){this.abort(new cl)}catch(t){return this.then(void 0,t)}finally(t){return fo(super.finally(t),this)}then(t,n){return fo(super.then(t,n),this)}};function dl(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function fl(e){return Object.entries(e).reduce((t,[n,r])=>(t[dl(n)]=r,t),{})}function Ht(e){const t=fl(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Ht):Ht(r))}return t}function ho(e){return`tapps/${e}`}function _o(e,t){sessionStorage.setItem(ho(e),JSON.stringify(t))}function ml(e){const t=sessionStorage.getItem(ho(e));try{return t?JSON.parse(t):void 0}catch{}}function hl(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function _l(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:s}=t,i=s===void 0?!0:s,a=typeof i=="boolean"?()=>i:i;function u(c,l,...p){if(l||a()){const d="font-weight:bold;padding:0 5px;border-radius:5px";console[c](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${d};background-color: lightblue;color:black`,"",`${d};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...p)}}return[u.bind(void 0,"log"),u.bind(void 0,"error")]}function bo(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function bl(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function yl(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function j(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,u=(s==null?void 0:s.received)??yl(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??bl(e.reference,c.lang)??(l?(c.lang,void 0):null)??r.message??(c.lang,void 0);p&&(c.message=typeof p=="function"?p(c):p),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function H(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},bo())}}}function yo(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function gl(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var vl=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function go(e,t){return{kind:"validation",type:"check",reference:go,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&j(this,"input",n,r),n}}}function vo(e){return{kind:"validation",type:"integer",reference:vo,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&j(this,"integer",t,n),t}}}function oe(e){return{kind:"transformation",type:"transform",reference:oe,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Eo(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function El(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Oe(e){return{kind:"schema",type:"boolean",reference:Oe,expects:"boolean",async:!1,message:e,get"~standard"(){return H(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:j(this,"type",t,n),t}}}function wo(e){return{kind:"schema",type:"date",reference:wo,expects:"Date",async:!1,message:e,get"~standard"(){return H(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?j(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:j(this,"type",t,n),t}}}function So(e,t){return{kind:"schema",type:"instance",reference:So,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return H(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:j(this,"type",n,r),n}}}function Ft(e){return{kind:"schema",type:"lazy",reference:Ft,expects:"unknown",async:!1,getter:e,get"~standard"(){return H(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function Ee(e,t){return{kind:"schema",type:"loose_object",reference:Ee,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return H(this)},"~run"(n,r){var s;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in i?i[a]:Eo(u),l=u["~run"]({value:c},r);if(l.issues){const p={type:"object",origin:"value",input:i,key:a,value:c};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(s=n.issues)==null||s.push(d);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(j(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const a in i)yo(i,a)&&!(a in this.entries)&&(n.value[a]=i[a])}else j(this,"type",n,r);return n}}}function Ke(e){return{kind:"schema",type:"number",reference:Ke,expects:"number",async:!1,message:e,get"~standard"(){return H(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:j(this,"type",t,n),t}}}function E(e,t){return{kind:"schema",type:"optional",reference:E,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return H(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Eo(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function $o(e,t,n){return{kind:"schema",type:"record",reference:$o,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return H(this)},"~run"(r,s){var i,a;const u=r.value;if(u&&typeof u=="object"){r.typed=!0,r.value={};for(const c in u)if(yo(u,c)){const l=u[c],p=this.key["~run"]({value:c},s);if(p.issues){const h={type:"object",origin:"key",input:u,key:c,value:l};for(const m of p.issues)m.path=[h],(i=r.issues)==null||i.push(m);if(r.issues||(r.issues=p.issues),s.abortEarly){r.typed=!1;break}}const d=this.value["~run"]({value:l},s);if(d.issues){const h={type:"object",origin:"value",input:u,key:c,value:l};for(const m of d.issues)m.path?m.path.unshift(h):m.path=[h],(a=r.issues)==null||a.push(m);if(r.issues||(r.issues=d.issues),s.abortEarly){r.typed=!1;break}}(!p.typed||!d.typed)&&(r.typed=!1),p.typed&&(r.value[p.value]=d.value)}}else j(this,"type",r,s);return r}}}function g(e){return{kind:"schema",type:"string",reference:g,expects:"string",async:!1,message:e,get"~standard"(){return H(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:j(this,"type",t,n),t}}}function Ao(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function Wt(e,t){return{kind:"schema",type:"union",reference:Wt,expects:gl(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return H(this)},"~run"(n,r){let s,i,a;for(const u of this.options){const c=u["~run"]({value:n.value},r);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];j(this,"type",n,r,{issues:Ao(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];j(this,"type",n,r,{issues:Ao(a)})}return n}}}function Co(){return{kind:"schema",type:"unknown",reference:Co,expects:"unknown",async:!1,get"~standard"(){return H(this)},"~run"(e){return e.typed=!0,e}}}function ko(e,t,n){const r=e["~run"]({value:t},bo(n));if(r.issues)throw new vl(r.issues);return r.value}function se(...e){return{...e[0],pipe:e,get"~standard"(){return H(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function wl(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Sl(e){return Object.entries(e).reduce((t,[n,r])=>(t[wl(n)]=r,t),{})}function Ut(e){const t=Sl(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Ut):Ut(r))}return t}function zt(e){return oe(t=>e?Ut(t):t)}function Mo(e){return t=>se(e,zt(t))}function $l(e){return(t,n)=>ko(se(e,zt(n)),t)}function Gt(){return oe(JSON.parse)}function Qt(e){const t=Mo(e);return n=>se(g(),Gt(),t(n))}function Al(e){return oe(t=>{const n={};return new URLSearchParams(t).forEach((r,s)=>{const i=n[s];Array.isArray(i)?i.push(r):i===void 0?n[s]=r:n[s]=[i,r]}),ko(e,n)})}function Po(e){return t=>se(Wt([g(),So(URLSearchParams)]),Al(e),zt(t))}const To=E(Ft(()=>Tl())),Cl=Ee({id:Ke(),photo_url:E(g()),type:g(),title:g(),username:E(g())}),kl=Ee({added_to_attachment_menu:E(Oe()),allows_write_to_pm:E(Oe()),first_name:g(),id:Ke(),is_bot:E(Oe()),is_premium:E(Oe()),last_name:E(g()),language_code:E(g()),photo_url:E(g()),username:E(g())}),Ml=Ee({auth_date:se(g(),oe(e=>new Date(Number(e)*1e3)),wo()),can_send_after:E(se(g(),oe(Number),vo())),chat:E(Ft(()=>Pl())),chat_type:E(g()),chat_instance:E(g()),hash:g(),query_id:E(g()),receiver:To,start_param:E(g()),signature:g(),user:To}),Pl=Qt(Cl),Tl=Qt(kl),Bl=Po(Ml);function Ol(e){return/^#[\da-f]{6}$/i.test(e)}const Bo=Mo($o(g(),se(Wt([g(),Ke()]),oe(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),go(Ol)))),Jt=E(se(g(),oe(e=>e==="1"))),Oo=Qt(Bo()),ql=Ee({tgWebAppBotInline:Jt,tgWebAppData:E(Bl()),tgWebAppDefaultColors:E(Oo()),tgWebAppFullscreen:Jt,tgWebAppPlatform:g(),tgWebAppShowSettings:Jt,tgWebAppStartParam:E(g()),tgWebAppThemeParams:Oo(),tgWebAppVersion:g()}),qo=Po(ql),Il=$l(qo()),Io=Ee({eventType:g(),eventData:E(Co())});function jo(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,s])=>(Array.isArray(s)?n.push(...s.map(i=>[r,String(i)])):s!=null&&n.push([r,s instanceof Date?(s.getTime()/1e3|0).toString():typeof s=="string"||typeof s=="number"?String(s):typeof s=="boolean"?s?"1":"0":t(r,s)]),n),[])).toString()}function jl(e){return jo(e)}function Dl(e){return jo(e,(t,n)=>t==="tgWebAppData"?jl(n):JSON.stringify(n))}function Do(e){try{return El(qo(),e)}catch{return!1}}function Nl(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(s){s(n)}),(r=e.get("*"))&&r.slice().map(function(s){s(t,n)})}}}function Vl(e,t){const n=Nl(),r=new Map,s=(i,a,u)=>{u||(u=!1);const c=r.get(i)||new Map;r.set(i,c);const l=c.get(a)||[];c.set(a,l);const p=l.findIndex(d=>d[1]===u);p>=0&&(n.off(i,l[p][0]),l.splice(p,1),!l.length&&c.delete(a),c.size||(r.delete(i),!r.size&&t()))};return[function(i,a,u){!r.size&&e();function c(){s(i,a,u)}function l(...h){u&&c(),i==="*"?a(h):a(...h)}n.on(i,l);const p=r.get(i)||new Map;r.set(i,p);const d=p.get(a)||[];return p.set(a,d),d.push([l,u||!1]),c},s,n.emit,function(){const i=n.all.size;n.all.clear(),r.clear(),i&&t()}]}function Kt(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}let Ye=!1;const[Yt,Ll]=_l("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog(){return Ye}}),No=e=>{Yt(!1,"Event received:",e)};function Rl(e){e!==Ye&&(Ye=e,Ye?k("*",No):O("*",No))}const Hl={clipboard_text_received:W({req_id:re(),data:Be(re())}),custom_method_invoked:W({req_id:re(),result:Lt(oo()),error:Lt(re())}),popup_closed:Be(W({button_id:Be(re(),()=>{})}),{}),viewport_changed:W({height:Vt(),width:Be(Vt(),()=>window.innerWidth),is_state_stable:Dt(),is_expanded:Dt()}),theme_changed:W({theme_params:Bo()})};function Vo(e){if(e.source!==window.parent)return;let t;try{t=Rt(so(re(),Gt(),Io),e.data)}catch{return}const{eventType:n,eventData:r}=t,s=Hl[n];try{const i=s?Rt(s,r):r;Fl(n,i)}catch(i){Ll(!0,[`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),t,i)}}const[k,O,Fl,Dm]=Vl(()=>{const e=window,t={receiveEvent:Kt};e.TelegramGameProxy_receiveEvent=Kt,e.TelegramGameProxy=t,e.Telegram={WebView:t},window.addEventListener("message",Vo)},()=>{["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]}),window.removeEventListener("message",Vo)});function Wl(e){return t=>t instanceof e}function we(e,t){t||(t=[]);class n extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Wl(n)]}const[Lo,Ul]=we("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]),[Ro,zl]=we("MethodParameterUnsupportedError",(e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`]),Gl=["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment"].join(`
`),[Ho,Ql]=we("LaunchParamsRetrieveError",Gl),[Fo,Jl]=we("InvalidLaunchParamsError",e=>[`Invalid value for launch params: ${e}`]),[Wo,Kl]=we("UnknownEnvError"),[Uo,Yl]=we("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]);function Zl(e,t){t()}function Xl(e,t){t||(t={});const n=t.equals||Object.is;let r=[],s=e;const i=l=>{if(!n(s,l)){const p=s;s=l,Zl(c,()=>{[...r].forEach(([d,h])=>{d(l,p),h&&u(d,!0)})})}};function a(l){const p=typeof l!="object"?{once:l}:l;return{once:p.once||!1,signal:p.signal||!1}}const u=(l,p)=>{const d=a(p),h=r.findIndex(([m,T])=>m===l&&T.once===d.once&&T.signal===d.signal);h>=0&&r.splice(h,1)},c=Object.assign(function(){return xl(c),s},{destroy(){r=[]},set:i,reset(){i(e)},sub(l,p){return r.push([l,a(p)]),()=>u(l,p)},unsub:u,unsubAll(){r=r.filter(l=>l[1].signal)}});return c}const Zt=[];function xl(e){Zt.length&&Zt[Zt.length-1].add(e)}const zo=Xl("https://web.telegram.org");function Xt(e,t){Yt(!1,"Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,r=JSON.stringify({eventType:e,eventData:t});if(ao())return n.parent.postMessage(r,zo());if(io(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}if(Je(W({external:W({notify:Nt()})}),n)){n.external.notify(r);return}throw new Wo}function xt(e,t,n){n||(n={});const{capture:r}=n,[s,i]=hl();return new mo(a=>{(Array.isArray(t)?t:[t]).forEach(u=>{s(k(u,c=>{(!r||(Array.isArray(t)?r({event:u,payload:c}):r(c)))&&a(c)}))}),(n.postEvent||Xt)(e,n.params)},n).finally(i)}const Go="launchParams";function Qo(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function en(){for(const e of[()=>Qo(window.location.href),()=>{const t=performance.getEntriesByType("navigation")[0];return t&&Qo(t.name)},()=>ml(Go)]){const t=e();if(t&&Do(t))return _o(Go,t),t}throw new Ho}function Ze(e){const t=Il(en());return e?Ht(t):t}function tn(e,t){if(!e)try{return Ze(),!0}catch{return!1}return mo.fn(async n=>{if(io(window))return!0;try{return await xt("web_app_request_theme","theme_changed",n),!0}catch{return!1}},t||{timeout:100})}function ep({launchParams:e,onEvent:t}={}){if(e){const s=typeof e=="string"||e instanceof URLSearchParams?e.toString():Dl({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");if(!Do(s))throw new Fo(s);_o("launchParams",s)}if(ao()){const s=so(re(),Gt(),Io),i=window.parent.postMessage.bind(window.parent);window.parent.postMessage=(...a)=>{const[u]=a,c=()=>{i(...a)};if(Je(s,u)&&t){const l=Rt(s,u);t([l.eventType,l.eventData],c)}else c()};return}const n=window.TelegramWebviewProxy||{},{postEvent:r}=n;window.TelegramWebviewProxy={...n,postEvent(s,i){const a=()=>{r&&r(s,i)};t?t([s,i?JSON.parse(i):void 0],a):a()}},Yt(!1,"Environment was mocked by the mockTelegramEnv function")}function Jo(){return new URLSearchParams(en()).get("tgWebAppData")||void 0}function Ko(e){return({req_id:t})=>t===e}function Yo(e){return e.split(".").map(Number)}function tp(e,t){const n=Yo(e),r=Yo(t),s=Math.max(n.length,r.length);for(let i=0;i<s;i+=1){const a=n[i]||0,u=r[i]||0;if(a!==u)return a>u?1:-1}return 0}function M(e,t){return tp(e,t)<=0}function ie(e,t,n){if(typeof n=="string"){if(e==="web_app_open_link"){if(t==="try_instant_view")return M("6.4",n);if(t==="try_browser")return M("7.6",n)}if(e==="web_app_set_header_color"&&t==="color")return M("6.9",n);if(e==="web_app_close"&&t==="return_back")return M("7.6",n);if(e==="web_app_setup_main_button"&&t==="has_shine_effect")return M("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return M("6.1",t);case"web_app_open_popup":return M("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return M("6.4",t);case"web_app_switch_inline_query":return M("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return M("6.9",t);case"web_app_setup_settings_button":return M("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return M("7.2",t);case"web_app_setup_swipe_behavior":return M("7.7",t);case"web_app_share_to_story":return M("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return M("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":case"web_app_check_location":case"web_app_open_location_settings":case"web_app_request_file_download":case"web_app_request_location":case"web_app_send_prepared_message":case"web_app_start_accelerometer":case"web_app_start_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_accelerometer":case"web_app_stop_device_orientation":case"web_app_stop_gyroscope":case"web_app_toggle_orientation_lock":return M("8.0",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function Zo(e,t){t||(t="strict");const n=typeof t=="function"?t:r=>{const{method:s,version:i}=r,a="param"in r?new Ro(s,r.param,i):new Lo(s,i);if(t==="strict")throw a;return console.warn(a.message)};return(r,s)=>ie(r,e)?r==="web_app_set_header_color"&&Je(W({color:ro()}),s)&&!ie(r,"color",e)?n({version:e,method:r,param:"color"}):Xt(r,s):n({version:e,method:r})}function np(e,t,n,r){return xt("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:e,params:t,req_id:n},capture:Ko(n)}).then(({result:s,error:i})=>{if(i)throw new Uo(i);return s})}function Xo(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function rp(e){return e.replace(/_([a-z])/g,(t,n)=>`-${n.toLowerCase()}`)}function xo(e){return`tapps/${e}`}function U(e,t){sessionStorage.setItem(xo(e),JSON.stringify(t))}function z(e){const t=sessionStorage.getItem(xo(e));try{return t?JSON.parse(t):void 0}catch{}}function nn(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function op(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:s}=t,i=s===void 0?!0:s,a=typeof i=="boolean"?()=>i:i;function u(c,l,...p){if(l||a()){const d="font-weight:bold;padding:0 5px;border-radius:5px";console[c](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${d};background-color: lightblue;color:black`,"",`${d};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...p)}}return[u.bind(void 0,"log"),u.bind(void 0,"error")]}function sp(){return performance.getEntriesByType("navigation")[0]}function G(){const e=sp();return!!e&&e.type==="reload"}let Se;function ip(e,t){Se&&Se.set(e,t)||t()}function rn(e){if(Se)return e();Se=new Map;try{e()}finally{Se.forEach(t=>t()),Se=void 0}}function es(e,t){t||(t={});const n=t.equals||Object.is;let r=[],s=e;const i=l=>{if(!n(s,l)){const p=s;s=l,ip(c,()=>{[...r].forEach(([d,h])=>{d(l,p),h&&u(d,!0)})})}};function a(l){const p=typeof l!="object"?{once:l}:l;return{once:p.once||!1,signal:p.signal||!1}}const u=(l,p)=>{const d=a(p),h=r.findIndex(([m,T])=>m===l&&T.once===d.once&&T.signal===d.signal);h>=0&&r.splice(h,1)},c=Object.assign(function(){return ap(c),s},{destroy(){r=[]},set:i,reset(){i(e)},sub(l,p){return r.push([l,a(p)]),()=>u(l,p)},unsub:u,unsubAll(){r=r.filter(l=>l[1].signal)}});return c}const qe=[];function ap(e){qe.length&&qe[qe.length-1].add(e)}function up(e,t){let n=new Set,r;function s(){return r||(r=es(a(),t))}function i(){s().set(a())}function a(){n.forEach(l=>{l.unsub(i,{signal:!0})});const u=new Set;let c;qe.push(u);try{c=e()}finally{qe.pop()}return u.forEach(l=>{l.sub(i,{signal:!0})}),n=u,c}return Object.assign(function(){return s()()},{destroy(){s().destroy()},sub(...u){return s().sub(...u)},unsub(...u){s().unsub(...u)},unsubAll(...u){s().unsubAll(...u)}})}function $e(e,t){return es(e,t)}function b(e,t){return up(e,t)}function y(e,t){const n=$e(e,t);return[n,b(n)]}let ts=!1;const[on,Nm]=op("SDK",{bgColor:"forestgreen",textColor:"white",shouldLog(){return ts}});function cp(e){ts=e,Rl(e)}const sn=$e(0),ns=$e(Xt),[rs,an]=y({tgWebAppPlatform:"unknown",tgWebAppVersion:"0.0"}),ae=b(()=>an().tgWebAppVersion);function os(e){e||(e={});const{postEvent:t}=e,n=e.launchParams||Ze();rs.set(n),ns.set(typeof t=="function"?t:Zo(n.tgWebAppVersion)),on(!1,"The package was configured. Launch params:",rs())}function un(){return sn.set(sn()+1),sn().toString()}function me(e,t,n){return np(e,t,un(),{...n||{},postEvent:_})}const w=(e,t,n)=>(n||(n={}),n.postEvent||(n.postEvent=_),xt(e,t,n)),_=(e,t)=>ns()(e,t);function Q(e){return b(()=>ie(e,ae()))}function lp(e){return t=>t instanceof e}function X(e,t){t||(t=[]);class n extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,lp(n)]}function he(e){return[e]}const[Xe,pp]=X("CSSVarsBoundError","CSS variables are already bound"),[cn,dp]=X("NotAvailableError",he),[fp,mp]=X("InvalidEnvError",he),[Ae,hp]=X("FunctionNotAvailableError",he),[J,_p]=X("InvalidArgumentsError",(e,t)=>[e,{cause:t}]),[ss,bp]=X("ConcurrentCallError",he),[is,yp]=X("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]),[ln,gp]=X("AccessDeniedError",he),[as,vp]=X("FullscreenFailedError",he),[us,Ep]=X("ShareMessageError",he);function pn(){return typeof window>"u"}function $(e,t,n){n||(n={});const{isSupported:r,isMounted:s,isMounting:i,component:a,supports:u}=n||{},c=`${a?`${a}.`:""}${e}()`,l=r?Array.isArray(r)||typeof r=="object"&&"any"in r?r:[r]:void 0;function p(A){if(u){const C=u[A];return ie(C[0],C[1],ae())}return!0}function d(){if(!l)return;function A(F){return typeof F=="function"?F():ie(F,ae())?void 0:`it is unsupported in Mini Apps version ${ae()}`}const C=Array.isArray(l)?l:l.any,L=C.map(A).filter(Boolean);return Array.isArray(l)?L[0]:L.length===C.length?L[L.length-1]:void 0}function h(...A){for(const C in u)if(u[C][2](...A)&&!p(C))return`option ${C} is not supported in Mini Apps version ${ae()}`}let m;if(u){m={};for(const A in u)m[A]=b(()=>p(A))}const T=b(()=>!d()),Te=b(()=>ae()!=="0.0"),B=b(()=>!s||s()),fe=b(()=>tn()&&!pn()&&Te()&&T()&&B());return Object.assign((...A)=>{const C=`Unable to call the ${c} ${a?"method":"function"}:`;if(pn()||!tn())throw new Ae(`${C} it can't be called outside Mini Apps`);if(!Te())throw new Ae(`${C} the SDK was not initialized. Use the SDK init() function`);const L=d();if(L)throw new Ae(`${C} ${L}`);const F=h(...A);if(F)throw new Ae(`${C} ${F}`);if(!B()){const f=i&&i()?"mounting. Wait for the mount completion":`unmounted. Use the ${a}.mount() method`;throw new Ae(`${C} the component is ${f}`)}return t(...A)},t,{isAvailable:fe,ifAvailable(...A){return fe()?[!0,t(...A)]:[!1]}},l?{isSupported:T}:{},m?{supports:m}:{})}function xe(e,t){return t||(t={}),(n,r,s,i)=>$(n,r,{...t,isSupported:s||t.isSupported,supports:i,component:e})}function ue(e,t,n){return xe(e,{isSupported:n,isMounted:t})}function D(e,t){return xe(e,{isSupported:t})}const et="web_app_setup_back_button",cs="back_button_pressed",tt="backButton",[ls,ps]=y(!1),[nt,ds]=y(!1),fs=Q(et),ms=ue(tt,nt,et),dn=D(tt,et),hs=ms("hide",()=>{fn(!1)}),_s=dn("mount",()=>{nt()||(fn(G()&&z(tt)||!1),nt.set(!0))});function fn(e){e!==ls()&&(_(et,{is_visible:e}),U(tt,e),ls.set(e))}const bs=dn("onClick",e=>k(cs,e)),ys=dn("offClick",e=>{O(cs,e)}),gs=ms("show",()=>{fn(!0)});function vs(){nt.set(!1)}const wp=Object.freeze(Object.defineProperty({__proto__:null,hide:hs,isMounted:ds,isSupported:fs,isVisible:ps,mount:_s,offClick:ys,onClick:bs,show:gs,unmount:vs},Symbol.toStringTag,{value:"Module"}));var Sp=Object.defineProperty,$p=(e,t,n)=>t in e?Sp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mn=(e,t,n)=>$p(e,typeof t!="symbol"?t+"":t,n);function Ap(e){return t=>t instanceof e}function Es(e,t){t||(t=[]);class n extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Ap(n)]}const[Cp,kp]=Es("CancelledError","Promise was canceled"),[Mp,Vm]=Es("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),ws=Symbol("Resolved");function Ss(e){return Array.isArray(e)&&e[0]===ws}function Pp(e){return[ws,e]}function $s(e,t){return e.reject=t.reject,e.abort=t.abort,e}let P=class eo extends Promise{constructor(t,n){let r,s;super((i,a)=>{let u,c;typeof t=="function"?(u=t,c=n):c=t;const l=[],p=f=>(...R)=>{const ne=f(...R);return l.forEach(Xr=>Xr()),ne},d=new AbortController,{signal:h}=d;s=f=>{!h.aborted&&d.abort(f)};const m=()=>h.reason,T=f=>{const R=()=>{f(m())};h.addEventListener("abort",R,!0);const ne=()=>{h.removeEventListener("abort",R,!0)};return l.push(ne),ne},Te=p(f=>{i(f),s(Pp(f))});r=p(f=>{a(f),s(f)}),c||(c={});const{abortSignal:B,rejectOnAbort:fe=!0}=c;if(B)if(B.aborted){const{reason:f}=B;if(fe)return r(f);s(f)}else{const f=()=>{s(B.reason)};B.addEventListener("abort",f),l.push(()=>{B.removeEventListener("abort",f)})}fe&&T(a);const{timeout:A}=c;if(A){const f=setTimeout(()=>{s(new Mp(A))},A);l.push(()=>{clearTimeout(f)})}const C=()=>h.aborted,L=()=>Ss(m()),F=()=>{const f=m();return Ss(f)?f[1]:void 0};try{const f=u&&u(Te,r,{abortReason:m,abortSignal:h,isAborted:C,isResolved:L,onAborted:T,onResolved:R=>T(()=>{L()&&R(F())}),resolved:F,throwIfAborted(){if(C())throw m()}});f instanceof Promise&&f.catch(r)}catch(f){r(f)}}),mn(this,"abort"),mn(this,"reject"),this.abort=s,this.reject=r}static fn(t,n){return new eo(async(r,s,i)=>{try{r(await t(i))}catch(a){s(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new eo((n,r)=>{r(t)})}cancel(){this.abort(new Cp)}catch(t){return this.then(void 0,t)}finally(t){return $s(super.finally(t),this)}then(t,n){return $s(super.then(t,n),this)}};function As(e,t){return e.resolve=t.resolve,e}let Tp=class to extends P{constructor(t,n){let r,s;typeof t=="function"?(r=t,s=n):s=t;let i;super((a,u,c)=>{i=a,r&&r(a,u,c)},s),mn(this,"resolve"),this.resolve=i}static fn(t,n){return new to((r,s,i)=>{try{Promise.resolve(t(i)).then(r,s)}catch(a){s(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new to((n,r)=>{r(t)})}catch(t){return this.then(void 0,t)}finally(t){return As(super.finally(t),this)}then(t,n){return As(super.then(t,n),this)}};function I(e,t,n){n||(n={});const{promise:r,error:s}=n,[i,a]=r?[r,b(r)]:y(),[u,c]=s?[s,b(s)]:y();return[Object.assign((...l)=>{if(i()){const d=new ss(t);return u.set(d),P.reject(d)}rn(()=>{i.set(e(...l)),u.set(void 0)});let p;return i().catch(d=>{throw p=d,d}).finally(()=>{rn(()=>{i.set(void 0),u.set(p)})})},e),[i,a,b(()=>!!i())],[u,c]]}function Ie(e,t,n){const[r,...s]=I(t,`The ${e} component is already mounting`),[i,a]=y(!1);return[(...u)=>i()?P.resolve():r(...u).then(c=>{rn(()=>{i.set(!0),n(c)})}),...s,[i,a]]}const[hn,Cs]=y({available:!1,type:"",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1}),ks=b(()=>hn().available),Ms="web_app_biometry_get_info",Ps=$("requestBiometry",e=>w(Ms,"biometry_info_received",e),{isSupported:Ms});function _n(e){if(!kp(e))throw e}function Ce(e){const t=e();t&&t.catch(_n).cancel()}const je="biometry",rt="web_app_biometry_request_auth",bn="biometry_info_received",Ts=e=>{ot(yn(e))};function Bs(){throw new cn("Biometry is not available")}function yn(e){let t=!1,n=!1,r="",s=!1,i="",a=!1;return e.available&&(t=!0,n=e.token_saved,r=e.device_id,s=e.access_requested,i=e.type,a=e.access_granted),{available:t,tokenSaved:n,deviceId:r,type:i,accessGranted:a,accessRequested:s}}const Os=Q(rt),[Bp,Op,qp,qs]=Ie(je,e=>{const t=G()&&z(je);return t?P.resolve(t):Ps({abortSignal:e}).then(yn)},e=>{k(bn,Ts),ot(e)}),Is=D(je,rt),gn=ue(je,qs[0],rt),js=Is("mount",Bp),[,vn,Ds]=Op,[,Ns]=qp,[Ip,Vs]=qs,[jp,Dp,Np]=I(e=>P.fn(async t=>{const n=hn();n.available||Bs();const r=await w(rt,"biometry_auth_requested",{...e,...t,params:{reason:((e||{}).reason||"").trim()}}),{token:s}=r;return typeof s=="string"&&ot({...n,token:s}),r},e),"Biometry authentication is already in progress"),Ls=gn("authenticate",jp),[,En,Rs]=Dp,[,Hs]=Np,Fs=Is("openSettings",()=>{_("web_app_biometry_open_settings")}),[Vp,Lp,Rp]=I(e=>P.fn(async t=>{const n=await w("web_app_biometry_request_access",bn,{...e,...t,params:{reason:(e||{}).reason||""}}).then(yn);return n.available||Bs(),ot(n),n.accessGranted},e),"Biometry access request is already in progress"),Ws=gn("requestAccess",Vp),[,wn,Us]=Lp,[,zs]=Rp;function ot(e){hn.set(e),U(je,e)}function Gs(){[En,wn,vn].forEach(Ce),O(bn,Ts),Ip.set(!1)}const Qs=gn("updateToken",e=>(e||(e={}),w("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then(t=>t.status))),Hp=Object.freeze(Object.defineProperty({__proto__:null,authError:Hs,authPromise:En,authenticate:Ls,isAuthenticating:Rs,isAvailable:ks,isMounted:Vs,isMounting:Ds,isRequestingAccess:Us,isSupported:Os,mount:js,mountError:Ns,mountPromise:vn,openSettings:Fs,requestAccess:Ws,requestAccessError:zs,requestAccessPromise:wn,state:Cs,unmount:Gs,updateToken:Qs},Symbol.toStringTag,{value:"Module"}));function st(e,t){return xe(e,{isMounted:t})}const ce=xe,it="closingBehavior",[Js,Ks]=y(!1),[Sn,$n]=y(!1),Ys=st(it,$n),Fp=ce(it),Zs=Ys("disableConfirmation",()=>{An(!1)}),Xs=Ys("enableConfirmation",()=>{An(!0)}),xs=Fp("mount",()=>{Sn()||(An(G()&&z(it)||!1),Sn.set(!0))});function An(e){e!==Js()&&(_("web_app_setup_closing_behavior",{need_confirmation:e}),U(it,e),Js.set(e))}function ei(){Sn.set(!1)}const Wp=Object.freeze(Object.defineProperty({__proto__:null,disableConfirmation:Zs,enableConfirmation:Xs,isConfirmationEnabled:Ks,isMounted:$n,mount:xs,unmount:ei},Symbol.toStringTag,{value:"Module"}));var te;function ti(e){return{lang:(e==null?void 0:e.lang)??(te==null?void 0:te.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(te==null?void 0:te.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(te==null?void 0:te.abortPipeEarly)}}var Cn;function Up(e){return Cn==null?void 0:Cn.get(e)}var kn;function zp(e){return kn==null?void 0:kn.get(e)}var Mn;function Gp(e,t){var n;return(n=Mn==null?void 0:Mn.get(e))==null?void 0:n.get(t)}function Qp(e){var n,r;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((r=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:r.name))??"null":t}function N(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,u=(s==null?void 0:s.received)??Qp(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??Gp(e.reference,c.lang)??(l?zp(c.lang):null)??r.message??Up(c.lang);p&&(c.message=typeof p=="function"?p(c):p),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function x(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},ti())}}}function ni(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Jp(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var Pn=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ri(e,t){return{kind:"validation",type:"check",reference:ri,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&N(this,"input",n,r),n}}}function oi(e){return{kind:"validation",type:"integer",reference:oi,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&N(this,"integer",t,n),t}}}function Tn(e){return{kind:"transformation",type:"transform",reference:Tn,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function si(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function ii(e,t){return{kind:"schema",type:"array",reference:ii,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return x(this)},"~run"(n,r){var i;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let a=0;a<s.length;a++){const u=s[a],c=this.item["~run"]({value:u},r);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(i=n.issues)==null||i.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value.push(c.value)}}else N(this,"type",n,r);return n}}}function Bn(e){return{kind:"schema",type:"date",reference:Bn,expects:"Date",async:!1,message:e,get"~standard"(){return x(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?N(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:N(this,"type",t,n),t}}}function ai(e,t){return{kind:"schema",type:"instance",reference:ai,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return x(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:N(this,"type",n,r),n}}}function On(e,t){return{kind:"schema",type:"loose_object",reference:On,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return x(this)},"~run"(n,r){var i;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in s||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in s?s[a]:si(u),l=u["~run"]({value:c},r);if(l.issues){const p={type:"object",origin:"value",input:s,key:a,value:c};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(i=n.issues)==null||i.push(d);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(N(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:s,key:a,value:s[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const a in s)ni(s,a)&&!(a in this.entries)&&(n.value[a]=s[a])}else N(this,"type",n,r);return n}}}function qn(e){return{kind:"schema",type:"number",reference:qn,expects:"number",async:!1,message:e,get"~standard"(){return x(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:N(this,"type",t,n),t}}}function ui(e,t){return{kind:"schema",type:"optional",reference:ui,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return x(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=si(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function ci(e,t,n){return{kind:"schema",type:"record",reference:ci,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return x(this)},"~run"(r,s){var a,u;const i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(const c in i)if(ni(i,c)){const l=i[c],p=this.key["~run"]({value:c},s);if(p.issues){const h={type:"object",origin:"key",input:i,key:c,value:l};for(const m of p.issues)m.path=[h],(a=r.issues)==null||a.push(m);if(r.issues||(r.issues=p.issues),s.abortEarly){r.typed=!1;break}}const d=this.value["~run"]({value:l},s);if(d.issues){const h={type:"object",origin:"value",input:i,key:c,value:l};for(const m of d.issues)m.path?m.path.unshift(h):m.path=[h],(u=r.issues)==null||u.push(m);if(r.issues||(r.issues=d.issues),s.abortEarly){r.typed=!1;break}}(!p.typed||!d.typed)&&(r.typed=!1),p.typed&&(r.value[p.value]=d.value)}}else N(this,"type",r,s);return r}}}function K(e){return{kind:"schema",type:"string",reference:K,expects:"string",async:!1,message:e,get"~standard"(){return x(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:N(this,"type",t,n),t}}}function li(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function pi(e,t){return{kind:"schema",type:"union",reference:pi,expects:Jp(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return x(this)},"~run"(n,r){let s,i,a;for(const u of this.options){const c=u["~run"]({value:n.value},r);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];N(this,"type",n,r,{issues:li(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];N(this,"type",n,r,{issues:li(a)})}return n}}}function at(e,t,n){const r=e["~run"]({value:t},ti(n));if(r.issues)throw new Pn(r.issues);return r.value}function De(...e){return{...e[0],pipe:e,get"~standard"(){return x(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}const di="web_app_invoke_custom_method",Ne=D("cloudStorage",di),fi=Q(di),In=Ne("deleteItem",(e,t)=>{const n=Array.isArray(e)?e:[e];return n.length?me("deleteStorageValues",{keys:n},t).then():P.resolve()});function Kp(e,t){const n=Array.isArray(e)?e:[e];return n.length?me("getStorageValues",{keys:n},t).then(r=>at(ci(De(K(),ri(s=>n.includes(s))),K()),r)):P.resolve(typeof e=="string"?"":{})}const mi=Ne("getItem",Kp),jn=Ne("getKeys",e=>me("getStorageKeys",{},e).then(t=>at(ii(K()),t))),hi=Ne("setItem",(e,t,n)=>me("saveStorageValue",{key:e,value:t},n).then()),Yp=Ne("clear",e=>jn(e).then(In)),Zp=Object.freeze(Object.defineProperty({__proto__:null,clear:Yp,deleteItem:In,getItem:mi,getKeys:jn,isSupported:fi,setItem:hi},Symbol.toStringTag,{value:"Module"})),Ve="web_app_trigger_haptic_feedback",Dn=D("hapticFeedback",Ve),_i=Q(Ve),bi=Dn("impactOccurred",e=>{_(Ve,{type:"impact",impact_style:e})}),yi=Dn("notificationOccurred",e=>{_(Ve,{type:"notification",notification_type:e})}),gi=Dn("selectionChanged",()=>{_(Ve,{type:"selection_change"})}),Xp=Object.freeze(Object.defineProperty({__proto__:null,impactOccurred:bi,isSupported:_i,notificationOccurred:yi,selectionChanged:gi},Symbol.toStringTag,{value:"Module"})),[vi,Ei]=y(void 0);function ee(e){return b(()=>{const t=vi();return t?t[e]:void 0})}const Nn=ee("auth_date"),Vn=ee("can_send_after"),wi=b(()=>{const e=Nn(),t=Vn();return t&&e?new Date(e.getTime()+t*1e3):void 0}),Si=ee("chat"),$i=ee("chat_type"),Ai=ee("chat_instance"),Ci=ee("hash"),ki=ee("query_id"),[xp,Mi]=y(),Pi=ee("receiver");function Ti(){const e=Ze();vi.set(e.tgWebAppData),xp.set(Jo())}const Bi=ee("start_param"),Oi=ee("user"),ed=Object.freeze(Object.defineProperty({__proto__:null,authDate:Nn,canSendAfter:Vn,canSendAfterDate:wi,chat:Si,chatInstance:Ai,chatType:$i,hash:Ci,queryId:ki,raw:Mi,receiver:Pi,restore:Ti,startParam:Bi,state:Ei,user:Oi},Symbol.toStringTag,{value:"Module"})),Ln="web_app_open_invoice",td=D("invoice",Ln),qi=Q(Ln);function nd(e,t,n){let r;if(t==="url"){const{hostname:s,pathname:i}=new URL(e,window.location.href);if(s!=="t.me")throw new J(`Link has unexpected hostname: ${s}`);const a=i.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!a)throw new J('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,r]=a}else r=e,n=t;return w(Ln,"invoice_closed",{...n,params:{slug:r},capture:s=>r===s.slug}).then(s=>s.status)}const[rd,od,sd]=I(nd,"Invoice is already opened"),Ii=td("open",rd),[,ji,Di]=od,[,Ni]=sd,id=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Di,isSupported:qi,open:Ii,openError:Ni,openPromise:ji},Symbol.toStringTag,{value:"Module"})),Le="locationManager",Rn="web_app_check_location",Vi="web_app_open_location_settings",ut=$e({available:!1,accessGranted:!1,accessRequested:!1});function Hn(e){return b(()=>ut()[e])}const Li=Q(Rn),Ri=Hn("available"),Hi=Hn("accessGranted"),Fi=Hn("accessRequested");function ad(e){let t=!1,n,r;return e.available&&(t=!0,n=e.access_requested,r=e.access_granted),{available:t,accessGranted:r||!1,accessRequested:n||!1}}const[ud,cd,ld,Wi]=Ie(Le,e=>{const t=G()&&z(Le);return t?P.resolve(t):w("web_app_check_location","location_checked",e).then(ad)},e=>{ut.set(e),U(Le,e)}),Ui=D(Le,Rn),pd=ue(Le,Wi[0],Rn),zi=Ui("mount",ud),[,Gi,Qi]=cd,[,Ji]=ld,[dd,Ki]=Wi,[fd,md,hd]=I(e=>w("web_app_request_location","location_requested",e).then(t=>{if(!t.available)throw ut.set({...ut(),available:!1}),new cn("Location data tracking is not available");const{available:n,...r}=t;return r}),"Location request is currently in progress"),Yi=pd("requestLocation",fd),[,Fn,Zi]=md,[,Xi]=hd,xi=Ui("openSettings",()=>{_(Vi)},Vi);function ea(){Ce(Fn),dd.set(!1)}const _d=Object.freeze(Object.defineProperty({__proto__:null,isAccessGranted:Hi,isAccessRequested:Fi,isAvailable:Ri,isMounted:Ki,isMounting:Qi,isRequestingLocation:Zi,isSupported:Li,mount:zi,mountError:Ji,mountPromise:Gi,openSettings:xi,requestLocation:Yi,requestLocationError:Xi,requestLocationPromise:Fn,unmount:ea},Symbol.toStringTag,{value:"Module"}));function Wn(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=r)}return t}function ta(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Lm(e){}function Rm(e){}function bd(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function yd(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function V(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,u=(s==null?void 0:s.received)??yd(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??bd(e.reference,c.lang)??(l?(c.lang,void 0):null)??r.message??(c.lang,void 0);p&&(c.message=typeof p=="function"?p(c):p),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function Y(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},ta())}}}function na(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function gd(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var vd=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ra(e,t){return{kind:"validation",type:"check",reference:ra,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&V(this,"input",n,r),n}}}function oa(e){return{kind:"validation",type:"integer",reference:oa,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&V(this,"integer",t,n),t}}}function le(e){return{kind:"transformation",type:"transform",reference:le,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function sa(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Re(e){return{kind:"schema",type:"boolean",reference:Re,expects:"boolean",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:V(this,"type",t,n),t}}}function ia(e){return{kind:"schema",type:"date",reference:ia,expects:"Date",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?V(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:V(this,"type",t,n),t}}}function aa(e,t){return{kind:"schema",type:"instance",reference:aa,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:V(this,"type",n,r),n}}}function Un(e){return{kind:"schema",type:"lazy",reference:Un,expects:"unknown",async:!1,getter:e,get"~standard"(){return Y(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function He(e,t){return{kind:"schema",type:"loose_object",reference:He,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){var s;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in i?i[a]:sa(u),l=u["~run"]({value:c},r);if(l.issues){const p={type:"object",origin:"value",input:i,key:a,value:c};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(s=n.issues)==null||s.push(d);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(V(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const a in i)na(i,a)&&!(a in this.entries)&&(n.value[a]=i[a])}else V(this,"type",n,r);return n}}}function ct(e){return{kind:"schema",type:"number",reference:ct,expects:"number",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:V(this,"type",t,n),t}}}function S(e,t){return{kind:"schema",type:"optional",reference:S,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Y(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=sa(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function ua(e,t,n){return{kind:"schema",type:"record",reference:ua,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return Y(this)},"~run"(r,s){var i,a;const u=r.value;if(u&&typeof u=="object"){r.typed=!0,r.value={};for(const c in u)if(na(u,c)){const l=u[c],p=this.key["~run"]({value:c},s);if(p.issues){const h={type:"object",origin:"key",input:u,key:c,value:l};for(const m of p.issues)m.path=[h],(i=r.issues)==null||i.push(m);if(r.issues||(r.issues=p.issues),s.abortEarly){r.typed=!1;break}}const d=this.value["~run"]({value:l},s);if(d.issues){const h={type:"object",origin:"value",input:u,key:c,value:l};for(const m of d.issues)m.path?m.path.unshift(h):m.path=[h],(a=r.issues)==null||a.push(m);if(r.issues||(r.issues=d.issues),s.abortEarly){r.typed=!1;break}}(!p.typed||!d.typed)&&(r.typed=!1),p.typed&&(r.value[p.value]=d.value)}}else V(this,"type",r,s);return r}}}function v(e){return{kind:"schema",type:"string",reference:v,expects:"string",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:V(this,"type",t,n),t}}}function ca(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function zn(e,t){return{kind:"schema",type:"union",reference:zn,expects:gd(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){let s,i,a;for(const u of this.options){const c=u["~run"]({value:n.value},r);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];V(this,"type",n,r,{issues:ca(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];V(this,"type",n,r,{issues:ca(a)})}return n}}}function la(e,t,n){const r=e["~run"]({value:t},ta(n));if(r.issues)throw new vd(r.issues);return r.value}function pe(...e){return{...e[0],pipe:e,get"~standard"(){return Y(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Ed(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function wd(e){return Object.entries(e).reduce((t,[n,r])=>(t[Ed(n)]=r,t),{})}function Gn(e){const t=wd(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Gn):Gn(r))}return t}function Qn(e){return le(t=>e?Gn(t):t)}function pa(e){return t=>pe(e,Qn(t))}function da(e){return(t,n)=>la(pe(e,Qn(n)),t)}function fa(){return le(JSON.parse)}function Jn(e){const t=pa(e);return n=>pe(v(),fa(),t(n))}function Kn(e){return le(t=>{const n={};return new URLSearchParams(t).forEach((r,s)=>{const i=n[s];Array.isArray(i)?i.push(r):i===void 0?n[s]=r:n[s]=[i,r]}),la(e,n)})}function ma(e){return t=>pe(zn([v(),aa(URLSearchParams)]),Kn(e),Qn(t))}const ha=S(Un(()=>kd())),Sd=He({id:ct(),photo_url:S(v()),type:v(),title:v(),username:S(v())}),$d=He({added_to_attachment_menu:S(Re()),allows_write_to_pm:S(Re()),first_name:v(),id:ct(),is_bot:S(Re()),is_premium:S(Re()),last_name:S(v()),language_code:S(v()),photo_url:S(v()),username:S(v())}),Ad=He({auth_date:pe(v(),le(e=>new Date(Number(e)*1e3)),ia()),can_send_after:S(pe(v(),le(Number),oa())),chat:S(Un(()=>Cd())),chat_type:S(v()),chat_instance:S(v()),hash:v(),query_id:S(v()),receiver:ha,start_param:S(v()),signature:v(),user:ha}),Cd=Jn(Sd),kd=Jn($d),_a=ma(Ad);function _e(e){return/^#[\da-f]{6}$/i.test(e)}function ba(e){return/^#[\da-f]{3}$/i.test(e)}function ya(e){const t=e.replace(/\s/g,"").toLowerCase();if(_e(t))return t;if(ba(t)){let r="#";for(let s=0;s<3;s+=1)r+=t[1+s].repeat(2);return r}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((r,s)=>r+parseInt(s,10).toString(16).padStart(2,"0"),"#")}const Md=pa(ua(v(),pe(zn([v(),ct()]),le(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),ra(_e)))),Yn=S(pe(v(),le(e=>e==="1"))),ga=Jn(Md()),Pd=He({tgWebAppBotInline:Yn,tgWebAppData:S(_a()),tgWebAppDefaultColors:S(ga()),tgWebAppFullscreen:Yn,tgWebAppPlatform:v(),tgWebAppShowSettings:Yn,tgWebAppStartParam:S(v()),tgWebAppThemeParams:ga(),tgWebAppVersion:v()}),Td=ma(Pd),Bd=da(_a()),Od=da(Td());function Zn(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,s])=>(Array.isArray(s)?n.push(...s.map(i=>[r,String(i)])):s!=null&&n.push([r,s instanceof Date?(s.getTime()/1e3|0).toString():typeof s=="string"||typeof s=="number"?String(s):typeof s=="boolean"?s?"1":"0":t(r,s)]),n),[])).toString()}function va(e){return Zn(e)}function qd(e){return Zn(e,(t,n)=>t==="tgWebAppData"?va(n):JSON.stringify(n))}function Xn(e){const t=ya(e);return Math.sqrt([.299,.587,.114].reduce((n,r,s)=>{const i=parseInt(t.slice(1+s*2,1+(s+1)*2),16);return n+i*i*r},0))<120}const[xn,Ea]=y(!1),[ke,wa]=y({});function q(e){return b(()=>ke()[e])}const Sa=q("accent_text_color"),Fe=q("bg_color"),lt=q("button_color"),er=q("button_text_color"),tr=q("bottom_bar_bg_color"),$a=q("destructive_text_color"),Aa=q("header_bg_color"),Ca=q("hint_color"),ka=b(()=>{const e=Fe();return!e||Xn(e)}),Ma=q("link_color"),We=q("secondary_bg_color"),Pa=q("section_bg_color"),Ta=q("section_header_text_color"),Ba=q("section_separator_color"),Oa=q("subtitle_text_color"),qa=q("text_color");function be(e){return b(()=>pt()[e])}const Ue=$e({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),pt=b(()=>{const e=Ue();return{...e,backgroundColor:e.backgroundColor||lt()||"#2481cc",textColor:e.textColor||er()||"#ffffff"}}),[nr,rr]=y(!1),Ia=be("backgroundColor"),ja=be("hasShineEffect"),Da=be("isEnabled"),Na=be("isLoaderVisible"),Va=be("isVisible"),La=be("text"),Ra=be("textColor"),Id="web_app_setup_main_button",Ha="main_button_pressed",dt="mainButton",or=ce(dt),jd=st(dt,rr),Fa=or("mount",()=>{if(!nr()){const e=G()&&z(dt);e&&Ue.set(e),nr.set(!0)}}),Wa=or("onClick",e=>k(Ha,e)),Ua=or("offClick",e=>{O(Ha,e)}),za=jd("setParams",e=>{Ue.set({...Ue(),...Wn(e)}),U(dt,Ue());const t=pt();t.text&&_(Id,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,text:t.text,text_color:t.textColor})});function Ga(){nr.set(!1)}const Dd=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Ia,hasShineEffect:ja,isEnabled:Da,isLoaderVisible:Na,isMounted:rr,isVisible:Va,mount:Fa,offClick:Ua,onClick:Wa,setParams:za,state:pt,text:La,textColor:Ra,unmount:Ga},Symbol.toStringTag,{value:"Module"}));function sr(e,t){document.documentElement.style.setProperty(e,t)}function ir(e){document.documentElement.style.removeProperty(e)}const ze="themeParams",Qa="theme_changed",Nd=ce(ze),Ja=({theme_params:e})=>{ke.set(e),U(ze,e)},[Vd,Ld,Rd,Ka]=Ie(ze,e=>{const t=G()&&z(ze);return t?P.resolve(t):w("web_app_request_theme","theme_changed",e).then(n=>n.theme_params)},e=>{k(Qa,Ja),ke.set(e)}),Ya=st(ze,Ka[0])("bindCssVars",e=>{if(xn())throw new Xe;e||(e=r=>`--tg-theme-${rp(r)}`);function t(r){Object.entries(ke()).forEach(([s,i])=>{i&&r(s,i)})}function n(){t((r,s)=>{sr(e(r),s)})}return n(),ke.sub(n),xn.set(!0),()=>{t(ir),ke.unsub(n),xn.set(!1)}}),ar=Nd("mount",Vd),[,ur,Za]=Ld,[,Xa]=Rd,[Hd,xa]=Ka;function eu(){Ce(ur),O(Qa,Ja),Hd.set(!1)}function tu(e){return b(()=>{const t=e();return _e(t)?t:t==="bg_color"?Fe():We()})}const[ft,nu]=y("bg_color"),mt=tu(ft),[ht,ru]=y("bottom_bar_bg_color"),_t=b(()=>{const e=ht();return _e(e)?e:e==="bottom_bar_bg_color"?tr()||We():e==="secondary_bg_color"?We():Fe()}),[bt,ou]=y("bg_color"),cr=tu(bt),[lr,su]=y(!1),iu=b(()=>{const e=mt();return e?Xn(e):!1}),[pr,au]=y(!0),dr=b(()=>({backgroundColor:ft(),bottomBarColor:ht(),headerColor:bt(),isActive:pr()})),fr="web_app_set_background_color",mr="web_app_set_bottom_bar_color",yt="web_app_set_header_color",uu="visibility_changed",Me="miniApp",hr={any:[fr,mr,yt]},cu=b(()=>hr.any.some(e=>ie(e,ae()))),lu=e=>{pr.set(e.is_visible),vt()},[Fd,Wd,Ud,pu]=Ie(Me,e=>ar(e).then(()=>G()&&z(Me)||void 0),e=>{br.ifAvailable(e?e.backgroundColor:"bg_color"),yr.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),gr.ifAvailable(e?e.headerColor:"bg_color"),pr.set(e?e.isActive:!0),k(uu,lu)}),du=ce(Me),zd=D(Me,hr),gt=ue(Me,pu[0],hr),fu=gt("bindCssVars",e=>{if(lr())throw new Xe;const[t,n]=nn();function r(s,i){function a(){sr(s,i()||null)}a(),t(i.sub(a),ir.bind(null,s))}return e||(e=s=>`--tg-${Xo(s)}`),r(e("bgColor"),mt),r(e("bottomBarColor"),_t),r(e("headerColor"),cr),t(()=>{lr.set(!1)}),lr.set(!0),n}),mu=du("close",e=>{_("web_app_close",{return_back:e})}),hu=zd("mount",Fd),[,_r,_u]=Wd,[,bu]=Ud,[Gd,yu]=pu,gu=du("ready",()=>{_("web_app_ready")});function vt(){U(Me,dr())}const br=gt("setBackgroundColor",e=>{e!==ft()&&(_(fr,{color:e}),ft.set(e),vt())},fr),yr=gt("setBottomBarColor",e=>{e!==ht()&&(_(mr,{color:e}),ht.set(e),vt())},mr),gr=gt("setHeaderColor",e=>{e!==bt()&&(_(yt,_e(e)?{color:e}:{color_key:e}),bt.set(e),vt())},yt,{rgb:[yt,"color",_e]});function vu(){Ce(_r),O(uu,lu),Gd.set(!1)}const Qd=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:nu,backgroundColorRGB:mt,bindCssVars:fu,bottomBarColor:ru,bottomBarColorRGB:_t,close:mu,headerColor:ou,headerColorRGB:cr,isActive:au,isCssVarsBound:su,isDark:iu,isMounted:yu,isMounting:_u,isSupported:cu,mount:hu,mountError:bu,mountPromise:_r,ready:gu,setBackgroundColor:br,setBottomBarColor:yr,setHeaderColor:gr,state:dr,unmount:vu},Symbol.toStringTag,{value:"Module"}));function Jd(e){const t=e.message.trim(),n=(e.title||"").trim(),r=e.buttons||[];if(n.length>64)throw new J(`Invalid title: ${n}`);if(!t||t.length>256)throw new J(`Invalid message: ${t}`);if(r.length>3)throw new J(`Invalid buttons count: ${r.length}`);return{title:n,message:t,buttons:r.length?r.map((s,i)=>{const a=s.id||"";if(a.length>64)throw new J(`Button with index ${i} has invalid id: ${a}`);if(!s.type||s.type==="default"||s.type==="destructive"){const u=s.text.trim();if(!u||u.length>64)throw new J(`Button with index ${i} has invalid text: ${u}`);return{type:s.type,text:u,id:a}}return{type:s.type,id:a}}):[{type:"close",id:""}]}}const vr="web_app_open_popup",Kd=D("popup",vr),Eu=Q(vr),[Yd,Zd,Xd]=I(e=>w(vr,"popup_closed",{...e,params:Jd(e)}).then(({button_id:t})=>t===void 0?null:t),"A popup is already opened"),wu=Kd("open",Yd),[,Su,$u]=Zd,[,Au]=Xd,xd=Object.freeze(Object.defineProperty({__proto__:null,isOpened:$u,isSupported:Eu,open:wu,openError:Au,openPromise:Su},Symbol.toStringTag,{value:"Module"})),Cu="web_app_close_scan_qr_popup",Er="web_app_open_scan_qr_popup",ef="scan_qr_popup_closed",tf="qr_text_received",ku=D("qrScanner",Er),Mu=ku("close",()=>{_(Cu),Ce(wr)}),Pu=Q(Er);function nf(e){e||(e={});const{onCaptured:t,text:n,capture:r}=e,[,s]=nn(k(ef,()=>{i.resolve()}),k(tf,a=>{t?t(a.data):(!r||r(a.data))&&(i.resolve(a.data),_(Cu))})),i=new Tp(e);return(e.postEvent||_)(Er,{text:n}),P.resolve(i).catch(_n).finally(s)}const[rf,of,sf]=I(nf,"The QR Scanner is already opened"),Tu=ku("open",rf),[,wr,Bu]=of,[,Ou]=sf,af=Object.freeze(Object.defineProperty({__proto__:null,close:Mu,isOpened:Bu,isSupported:Pu,open:Tu,openError:Ou,openPromise:wr},Symbol.toStringTag,{value:"Module"}));function de(e){return b(()=>Et()[e])}const Ge=$e({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),Et=b(()=>{const e=Ge();return{...e,backgroundColor:e.backgroundColor||_t()||"#000000",textColor:e.textColor||lt()||"#2481cc"}}),[Sr,$r]=y(!1),qu=de("backgroundColor"),Iu=de("hasShineEffect"),ju=de("isEnabled"),Du=de("isLoaderVisible"),Nu=de("isVisible"),Vu=de("position"),Lu=de("text"),Ru=de("textColor"),wt="web_app_setup_secondary_button",Hu="secondary_button_pressed",St="secondaryButton",Ar=D(St,wt),uf=ue(St,$r,wt),Fu=Q(wt),Wu=Ar("mount",()=>{if(!Sr()){const e=G()&&z(St);e&&Ge.set(e),Sr.set(!0)}}),Uu=Ar("onClick",e=>k(Hu,e)),zu=Ar("offClick",e=>{O(Hu,e)}),Gu=uf("setParams",e=>{Ge.set({...Ge(),...Wn(e)}),U(St,Ge());const t=Et();t.text&&_(wt,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,position:t.position,text:t.text,text_color:t.textColor})});function Qu(){Sr.set(!1)}const cf=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:qu,hasShineEffect:Iu,isEnabled:ju,isLoaderVisible:Du,isMounted:$r,isSupported:Fu,isVisible:Nu,mount:Wu,offClick:zu,onClick:Uu,position:Vu,setParams:Gu,state:Et,text:Lu,textColor:Ru,unmount:Qu},Symbol.toStringTag,{value:"Module"})),$t="web_app_setup_settings_button",Ju="settings_button_pressed",At="settingsButton",[Ku,Yu]=y(!1),[Ct,Zu]=y(!1),Xu=Q($t),Cr=D(At,$t),xu=ue(At,Ct,$t),ec=xu("hide",()=>{kr(!1)}),tc=Cr("mount",()=>{Ct()||(kr(G()&&z(At)||!1),Ct.set(!0))});function kr(e){e!==Ku()&&(_($t,{is_visible:e}),U(At,e),Ku.set(e))}const nc=Cr("onClick",e=>k(Ju,e)),rc=Cr("offClick",e=>{O(Ju,e)}),oc=xu("show",()=>{kr(!0)});function sc(){Ct.set(!1)}const lf=Object.freeze(Object.defineProperty({__proto__:null,hide:ec,isMounted:Zu,isSupported:Xu,isVisible:Yu,mount:tc,offClick:rc,onClick:nc,show:oc,unmount:sc},Symbol.toStringTag,{value:"Module"})),kt="web_app_setup_swipe_behavior",Mt="swipeBehavior",[Qe,ic]=y(!1),ac=Q(kt),[Mr,uc]=y(!0),pf=D(Mt,kt),cc=ue(Mt,Qe,kt),lc=cc("disableVertical",()=>{Pr(!1)}),pc=cc("enableVertical",()=>{Pr(!0)}),dc=pf("mount",()=>{Qe()||(Pr(G()&&z(Mt)||!1,!0),Qe.set(!0))});function Pr(e,t){(e!==Mr()||t)&&(_(kt,{allow_vertical_swipe:e}),U(Mt,e),Mr.set(e))}function fc(){Qe.set(!1)}const df=Object.freeze(Object.defineProperty({__proto__:null,_isMounted:Qe,_isVerticalEnabled:Mr,disableVertical:lc,enableVertical:pc,isMounted:ic,isSupported:ac,isVerticalEnabled:uc,mount:dc,unmount:fc},Symbol.toStringTag,{value:"Module"})),ff=Object.freeze(Object.defineProperty({__proto__:null,accentTextColor:Sa,backgroundColor:Fe,bindCssVars:Ya,bottomBarBgColor:tr,buttonColor:lt,buttonTextColor:er,destructiveTextColor:$a,headerBackgroundColor:Aa,hintColor:Ca,isCssVarsBound:Ea,isDark:ka,isMounted:xa,isMounting:Za,linkColor:Ma,mount:ar,mountError:Xa,mountPromise:ur,secondaryBackgroundColor:We,sectionBackgroundColor:Pa,sectionHeaderTextColor:Ta,sectionSeparatorColor:Ba,state:wa,subtitleTextColor:Oa,textColor:qa,unmount:eu},Symbol.toStringTag,{value:"Module"})),ye="viewport",Tr="fullscreen_changed",Br="safe_area_changed",Or="content_safe_area_changed",qr="viewport_changed",mc=ce(ye),hc={left:0,top:0,bottom:0,right:0};function Ir(e){return Math.max(e,0)}const[jr,Dr]=y({contentSafeAreaInsets:hc,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:hc,stableHeight:0,width:0});function ge(e){return b(()=>Dr()[e])}const Pt=ge("height"),Tt=ge("stableHeight"),Nr=ge("width"),_c=ge("isExpanded"),bc=b(()=>Pt()===Tt());function Pe(e){const{height:t,stableHeight:n,width:r}=e;jr.set({...jr(),...Wn({...e,height:t?Ir(t):void 0,width:r?Ir(r):void 0,stableHeight:n?Ir(n):void 0})}),U(ye,jr())}function mf(){return z(ye)}function Bt(e){return b(()=>Ot()[e])}const Ot=ge("contentSafeAreaInsets"),Vr=Bt("bottom"),Lr=Bt("left"),Rr=Bt("right"),Hr=Bt("top");function qt(e){return b(()=>It()[e])}const It=ge("safeAreaInsets"),Fr=qt("bottom"),Wr=qt("left"),Ur=qt("right"),zr=qt("top"),yc="web_app_request_safe_area",gc=D(ye,yc),Gr=gc("requestContentSafeAreaInsets",e=>w("web_app_request_content_safe_area",Or,e));function vc(e){return w("web_app_request_viewport",qr,e)}const Qr=gc("requestSafeAreaInsets",e=>w(yc,Br,e)),Ec=e=>{const{height:t}=e;Pe({isExpanded:e.is_expanded,height:t,width:e.width,stableHeight:e.is_state_stable?t:void 0})},wc=e=>{Pe({isFullscreen:e.is_fullscreen})},Sc=e=>{Pe({safeAreaInsets:e})},$c=e=>{Pe({contentSafeAreaInsets:e})},[hf,_f,bf,yf]=Ie(ye,e=>{const t=G()&&mf();return t?P.resolve(t):P.fn(async n=>{const r=await P.all([Qr.isAvailable()?Qr(n):It(),Gr.isAvailable()?Gr(n):Ot()]),s=an(),i={contentSafeAreaInsets:r[1],isFullscreen:!!s.tgWebAppFullscreen,safeAreaInsets:r[0]};if(["macos","tdesktop","unigram","webk","weba","web"].includes(s.tgWebAppPlatform)){const a=window;return{...i,height:a.innerHeight,isExpanded:!0,stableHeight:a.innerHeight,width:a.innerWidth}}return vc(n).then(a=>({...i,height:a.height,isExpanded:a.is_expanded,stableHeight:a.is_state_stable?a.height:0,width:a.width}))},e)},e=>{k(qr,Ec),k(Tr,wc),k(Br,Sc),k(Or,$c),Pe(e)}),Ac=mc("mount",hf),[,Jr,Cc]=_f,[,kc]=bf,[Kr,Mc]=yf;function Pc(){Ce(Jr),O(qr,Ec),O(Tr,wc),O(Br,Sc),O(Or,$c),Kr.set(!1)}const gf=st(ye,Kr),[Yr,Tc]=y(!1),Bc=gf("bindCssVars",e=>{if(Yr())throw new Xe;e||(e=n=>`--tg-viewport-${Xo(n)}`);const t=[["height",Pt],["stableHeight",Tt],["width",Nr],["safeAreaInsetTop",zr],["safeAreaInsetBottom",Fr],["safeAreaInsetLeft",Wr],["safeAreaInsetRight",Ur],["contentSafeAreaInsetTop",Hr],["contentSafeAreaInsetBottom",Vr],["contentSafeAreaInsetLeft",Lr],["contentSafeAreaInsetRight",Rr]].reduce((n,[r,s])=>{const i=e(r);if(i){const a=()=>{sr(i,`${s()}px`)};n.push([a,s.sub(a),i])}return n},[]);return t.forEach(n=>{n[0]()}),Yr.set(!0),()=>{t.forEach(n=>{n[1](),ir(n[2])}),Yr.set(!1)}}),Oc=mc("expand",()=>{_("web_app_expand")}),qc="web_app_request_fullscreen",vf=ue(ye,Kr,qc),Zr=ge("isFullscreen"),[Ef,Ic]=y(),[wf,jc]=y();function Dc(e,t){return vf(e,I(n=>w(t?qc:"web_app_exit_fullscreen",[Tr,"fullscreen_failed"],n).then(r=>{if("error"in r&&r.error!=="ALREADY_FULLSCREEN")throw new as(r.error);const s="is_fullscreen"in r?r.is_fullscreen:!0;s!==Zr()&&Pe({isFullscreen:s})}),"Fullscreen mode change is already being requested",{promise:Ef,error:wf})[0])}const Nc=Dc("requestFullscreen",!0),Vc=Dc("exitFullscreen"),Sf=Object.freeze(Object.defineProperty({__proto__:null,bindCssVars:Bc,changeFullscreenError:jc,changeFullscreenPromise:Ic,contentSafeAreaInsetBottom:Vr,contentSafeAreaInsetLeft:Lr,contentSafeAreaInsetRight:Rr,contentSafeAreaInsetTop:Hr,contentSafeAreaInsets:Ot,exitFullscreen:Vc,expand:Oc,height:Pt,isCssVarsBound:Tc,isExpanded:_c,isFullscreen:Zr,isMounted:Mc,isMounting:Cc,isStable:bc,mount:Ac,mountError:kc,mountPromise:Jr,requestFullscreen:Nc,safeAreaInsetBottom:Fr,safeAreaInsetLeft:Wr,safeAreaInsetRight:Ur,safeAreaInsetTop:zr,safeAreaInsets:It,stableHeight:Tt,state:Dr,unmount:Pc,width:Nr},Symbol.toStringTag,{value:"Module"})),Lc="web_app_request_emoji_status_access",[$f,Af,Cf]=I(e=>w(Lc,"emoji_status_access_requested",e).then(t=>t.status),"Emoji status access request is already in progress"),kf=$("requestEmojiStatusAccess",$f,{isSupported:Lc}),[,Mf,Pf]=Af,[,Tf]=Cf,Rc="web_app_set_emoji_status",[Bf,Of,qf]=I((e,t)=>w(Rc,["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:e,duration:(t||{}).duration},...t}).then(n=>{if(n&&"error"in n)throw new is(n.error)}),"Emoji status set request is currently in progress"),If=$("setEmojiStatus",Bf,{isSupported:Rc}),[,jf,Df]=Of,[,Nf]=qf,Vf={isSupported:"web_app_add_to_home_screen"},Hc="home_screen_failed",Lf=$("onAddToHomeScreenFailed",(e,t)=>k(Hc,e,t),{isSupported:"web_app_add_to_home_screen"}),Rf=$("offAddToHomeScreenFailed",e=>{O(Hc,e)},Vf),Fc={isSupported:"web_app_add_to_home_screen"},Wc="home_screen_added",Hf=$("onAddedToHomeScreen",(e,t)=>k(Wc,e,t),Fc),Ff=$("offAddedToHomeScreen",e=>{O(Wc,e)},Fc),Uc="web_app_add_to_home_screen",Wf=$("addToHomeScreen",()=>{_(Uc)},{isSupported:Uc}),zc="web_app_check_home_screen",[Uf,zf,Gf]=I(e=>w(zc,"home_screen_checked",e).then(t=>t.status||"unknown"),"Check home screen status request is currently in progress"),Qf=$("checkHomeScreenStatus",Uf,{isSupported:zc}),[,Jf,Kf]=zf,[,Yf]=Gf,Zf=ce()("openLink",(e,t)=>{if(typeof e=="string")try{e=new URL(e)}catch(n){throw new J(`"${e.toString()}" is invalid URL`,n)}t||(t={}),_("web_app_open_link",{url:e.toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})}),Gc="web_app_open_tg_link",Qc=ce()("openTelegramLink",e=>{const t=e.toString();if(!t.match(/^https:\/\/t.me\/.+/))throw new J(`"${t}" is invalid URL`);if(!ie(Gc,ae())){window.location.href=t;return}e=new URL(e),_(Gc,{path_full:e.pathname+e.search})}),Xf=ce()("shareURL",(e,t)=>{Qc("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))});function xf(e,t){return new P({abortSignal:t,timeout:e}).catch(()=>{})}const Jc="web_app_request_phone",[em,tm,nm]=I(e=>w(Jc,"phone_requested",e).then(t=>t.status),"Phone access request is currently in progress"),Kc=$("requestPhoneAccess",em,{isSupported:Jc}),[,rm,om]=tm,[,sm]=nm;async function Yc(e){const t=await me("getRequestedContact",{},{...e,timeout:(e||{}).timeout||5e3});return at(De(pi([K(),ai(URLSearchParams)]),Kn(On({contact:De(K(),fa(),On({user_id:qn(),phone_number:K(),first_name:K(),last_name:ui(K())})),auth_date:De(K(),Tn(n=>new Date(Number(n)*1e3)),Bn()),hash:K()}))),t)}const[im,am,um]=I(e=>new P(async(t,n,r)=>{try{return t(await Yc(r))}catch(a){if(a instanceof Pn)throw a}if(await Kc(r)!=="sent")throw new ln("User denied access");let i=50;for(;!r.isAborted();){try{return t(await Yc(r))}catch(a){if(a instanceof Pn)throw a}await xf(i),i+=50}},e),"Contact is already being requested"),cm=$("requestContact",im,{isSupported:"web_app_request_phone"}),[,lm,pm]=am,[,dm]=um,Zc="web_app_request_write_access",[fm,mm,hm]=I(e=>w(Zc,"write_access_requested",e).then(t=>t.status),"Write access request is currently in progress"),_m=$("requestWriteAccess",fm,{isSupported:Zc}),[,bm,ym]=mm,[,gm]=hm;function vm(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}async function Em(e){try{const{clipboard:t}=navigator;if(t)return await t.writeText(e)}catch{}vm(e)}const Xc="web_app_request_file_download",wm=$("downloadFile",(e,t,n)=>w(Xc,"file_download_requested",{...n,params:{url:e,file_name:t}}).then(r=>{if(r.status!=="downloading")throw new ln("User denied the action")}),{isSupported:Xc}),Sm=$("getCurrentTime",e=>me("getCurrentTime",{},e).then(t=>at(De(qn(),oi(),Tn(n=>new Date(n*1e3)),Bn()),t)),{isSupported:"web_app_invoke_custom_method"}),xc="web_app_read_text_from_clipboard",$m=$("readTextFromClipboard",e=>{const t=un();return w(xc,"clipboard_text_received",{...e,params:{req_id:t},capture:Ko(t)}).then(({data:n=null})=>n)},{isSupported:xc}),Am=$("sendData",e=>{const{size:t}=new Blob([e]);if(!t||t>4096)throw new J(t?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data");_("web_app_data_send",{data:e})},{isSupported(){return an().tgWebAppBotInline?void 0:"The application must be launched in the inline mode"}}),el="web_app_send_prepared_message",Cm=$("shareMessage",(e,t)=>w(el,["prepared_message_failed","prepared_message_sent"],{...t,params:{id:e}}).then(n=>{if(n&&"error"in n)throw new us(n.error)}),{isSupported:el}),tl="web_app_share_to_story",km=$("shareStory",(e,t)=>{t||(t={}),_(tl,{text:t.text,media_url:e,widget_link:t.widgetLink})},{isSupported:tl}),Mm="web_app_switch_inline_query",Pm=$("switchInlineQuery",(e,t)=>{_(Mm,{query:e,chat_types:t||[]})});function Tm(e){try{return[!0,e()]}catch(t){return[!1,t]}}function Bm(e){os(e);const[t,n]=nn(k("reload_iframe",()=>{on(!1,"Received a request to reload the page"),_("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:r=!0}=e||{};if(r){const s=document.createElement("style");s.id="telegram-custom-styles",document.head.appendChild(s),t(k("set_custom_style",i=>{s.innerHTML=i}),()=>{document.head.removeChild(s)})}return _("iframe_ready",{reload_supported:!0}),on(!1,"The package was initialized"),n}return o.AccessDeniedError=ln,o.CSSVarsBoundError=Xe,o.ConcurrentCallError=ss,o.FullscreenFailedError=as,o.FunctionUnavailableError=Ae,o.InvalidArgumentsError=J,o.InvalidEnvError=fp,o.InvalidLaunchParamsError=Fo,o.InvokeCustomMethodError=Uo,o.LaunchParamsRetrieveError=Ho,o.MethodParameterUnsupportedError=Ro,o.MethodUnsupportedError=Lo,o.NotAvailableError=cn,o.SetEmojiStatusError=is,o.ShareMessageError=us,o.UnknownEnvError=Wo,o.addToHomeScreen=Wf,o.authenticateBiometry=Ls,o.backButton=wp,o.bindMiniAppCssVars=fu,o.bindThemeParamsCssVars=Ya,o.bindViewportCssVars=Bc,o.biometry=Hp,o.biometryAuthError=Hs,o.biometryAuthPromise=En,o.biometryMountError=Ns,o.biometryState=Cs,o.changeFullscreenError=jc,o.changeFullscreenPromise=Ic,o.checkHomeScreenStatus=Qf,o.checkHomeScreenStatusError=Yf,o.checkHomeScreenStatusPromise=Jf,o.closeMiniApp=mu,o.closeQrScanner=Mu,o.closingBehavior=Wp,o.cloudStorage=Zp,o.configure=os,o.copyTextToClipboard=Em,o.createPostEvent=Zo,o.createRequestId=un,o.deleteCloudStorageItem=In,o.disableClosingConfirmation=Zs,o.disableVerticalSwipes=lc,o.downloadFile=wm,o.emitEvent=Kt,o.enableClosingConfirmation=Xs,o.enableVerticalSwipes=pc,o.exitFullscreen=Vc,o.expandViewport=Oc,o.getCloudStorageItem=mi,o.getCloudStorageKeys=jn,o.getCurrentTime=Sm,o.hapticFeedback=Xp,o.hapticFeedbackImpactOccurred=bi,o.hapticFeedbackNotificationOccurred=yi,o.hapticFeedbackSelectionChanged=gi,o.hideBackButton=hs,o.hideSettingsButton=ec,o.ignoreCanceled=_n,o.init=Bm,o.initData=ed,o.initDataAuthDate=Nn,o.initDataCanSendAfter=Vn,o.initDataCanSendAfterDate=wi,o.initDataChat=Si,o.initDataChatInstance=Ai,o.initDataChatType=$i,o.initDataHash=Ci,o.initDataQueryId=ki,o.initDataRaw=Mi,o.initDataReceiver=Pi,o.initDataStartParam=Bi,o.initDataState=Ei,o.initDataUser=Oi,o.invoice=id,o.invokeCustomMethod=me,o.isAccessDeniedError=gp,o.isAuthenticatingBiometry=Rs,o.isBackButtonMounted=ds,o.isBackButtonSupported=fs,o.isBackButtonVisible=ps,o.isBiometryAvailable=ks,o.isBiometryMounted=Vs,o.isBiometryMounting=Ds,o.isBiometrySupported=Os,o.isCSSVarsBoundError=pp,o.isCheckingHomeScreenStatus=Kf,o.isClosingBehaviorMounted=$n,o.isClosingConfirmationEnabled=Ks,o.isCloudStorageSupported=fi,o.isColorDark=Xn,o.isConcurrentCallError=bp,o.isFullscreen=Zr,o.isFullscreenFailedError=vp,o.isFunctionNotAvailableError=hp,o.isHapticFeedbackSupported=_i,o.isInvalidArguments=_p,o.isInvalidEnvError=mp,o.isInvalidLaunchParamsError=Jl,o.isInvoiceOpened=Di,o.isInvoiceSupported=qi,o.isInvokeCustomMethodError=Yl,o.isLaunchParamsRetrieveError=Ql,o.isLocationManagerAccessGranted=Hi,o.isLocationManagerAccessRequested=Fi,o.isLocationManagerAvailable=Ri,o.isLocationManagerMounted=Ki,o.isLocationManagerMounting=Qi,o.isLocationManagerSupported=Li,o.isMainButtonEnabled=Da,o.isMainButtonLoaderVisible=Na,o.isMainButtonMounted=rr,o.isMainButtonVisible=Va,o.isMethodMethodParameterUnsupportedError=zl,o.isMethodUnsupportedError=Ul,o.isMiniAppActive=au,o.isMiniAppCssVarsBound=su,o.isMiniAppDark=iu,o.isMiniAppMounted=yu,o.isMiniAppMounting=_u,o.isMiniAppSupported=cu,o.isNotAvailableError=dp,o.isPopupOpened=$u,o.isPopupSupported=Eu,o.isQrScannerOpened=Bu,o.isQrScannerSupported=Pu,o.isRGB=_e,o.isRGBShort=ba,o.isRequestingBiometryAccess=Us,o.isRequestingContact=pm,o.isRequestingEmojiStatusAccess=Pf,o.isRequestingLocation=Zi,o.isRequestingPhoneAccess=om,o.isRequestingWriteAccess=ym,o.isSSR=pn,o.isSecondaryButtonEnabled=ju,o.isSecondaryButtonLoaderVisible=Du,o.isSecondaryButtonMounted=$r,o.isSecondaryButtonSupported=Fu,o.isSecondaryButtonVisible=Nu,o.isSetEmojiStatusError=yp,o.isSettingEmojiStatus=Df,o.isSettingsButtonMounted=Zu,o.isSettingsButtonSupported=Xu,o.isSettingsButtonVisible=Yu,o.isShareMessageError=Ep,o.isSwipeBehaviorMounted=ic,o.isSwipeBehaviorSupported=ac,o.isTMA=tn,o.isThemeParamsCssVarsBound=Ea,o.isThemeParamsDark=ka,o.isThemeParamsMounted=xa,o.isThemeParamsMounting=Za,o.isUnknownEnvError=Kl,o.isVerticalSwipesEnabled=uc,o.isViewportCssVarsBound=Tc,o.isViewportExpanded=_c,o.isViewportMounted=Mc,o.isViewportMounting=Cc,o.isViewportStable=bc,o.locationManager=_d,o.locationManagerMountError=Ji,o.locationManagerMountPromise=Gi,o.mainButton=Dd,o.mainButtonBackgroundColor=Ia,o.mainButtonHasShineEffect=ja,o.mainButtonState=pt,o.mainButtonText=La,o.mainButtonTextColor=Ra,o.miniApp=Qd,o.miniAppBackgroundColor=nu,o.miniAppBackgroundColorRGB=mt,o.miniAppBottomBarColor=ru,o.miniAppBottomBarColorRGB=_t,o.miniAppHeaderColor=ou,o.miniAppHeaderColorRGB=cr,o.miniAppMountError=bu,o.miniAppMountPromise=_r,o.miniAppReady=gu,o.miniAppState=dr,o.mockTelegramEnv=ep,o.mountBackButton=_s,o.mountBiometry=js,o.mountBiometryPromise=vn,o.mountClosingBehavior=xs,o.mountLocationManager=zi,o.mountMainButton=Fa,o.mountMiniApp=hu,o.mountSecondaryButton=Wu,o.mountSettingsButton=tc,o.mountSwipeBehavior=dc,o.mountThemeParams=ar,o.mountViewport=Ac,o.off=O,o.offAddToHomeScreenFailed=Rf,o.offAddedToHomeScreen=Ff,o.offBackButtonClick=ys,o.offMainButtonClick=Ua,o.offSecondaryButtonClick=zu,o.offSettingsButtonClick=rc,o.on=k,o.onAddToHomeScreenFailed=Lf,o.onAddedToHomeScreen=Hf,o.onBackButtonClick=bs,o.onMainButtonClick=Wa,o.onSecondaryButtonClick=Uu,o.onSettingsButtonClick=nc,o.openBiometrySettings=Fs,o.openInvoice=Ii,o.openInvoiceError=Ni,o.openInvoicePromise=ji,o.openLink=Zf,o.openLocationManagerSettings=xi,o.openPopup=wu,o.openPopupError=Au,o.openPopupPromise=Su,o.openQrScanner=Tu,o.openQrScannerError=Ou,o.openQrScannerPromise=wr,o.openTelegramLink=Qc,o.parseInitDataQuery=Bd,o.parseLaunchParamsQuery=Od,o.popup=xd,o.postEvent=_,o.qrScanner=af,o.readTextFromClipboard=$m,o.request=w,o.requestBiometry=Ps,o.requestBiometryAccess=Ws,o.requestBiometryAccessError=zs,o.requestBiometryAccessPromise=wn,o.requestContact=cm,o.requestContactError=dm,o.requestContactPromise=lm,o.requestContentSafeAreaInsets=Gr,o.requestEmojiStatusAccess=kf,o.requestEmojiStatusAccessError=Tf,o.requestEmojiStatusAccessPromise=Mf,o.requestFullscreen=Nc,o.requestLocation=Yi,o.requestLocationError=Xi,o.requestLocationPromise=Fn,o.requestPhoneAccess=Kc,o.requestPhoneAccessError=sm,o.requestPhoneAccessPromise=rm,o.requestSafeAreaInsets=Qr,o.requestViewport=vc,o.requestWriteAccess=_m,o.requestWriteAccessError=gm,o.requestWriteAccessPromise=bm,o.restoreInitData=Ti,o.retrieveLaunchParams=Ze,o.retrieveRawInitData=Jo,o.retrieveRawLaunchParams=en,o.safeCall=Tm,o.secondaryButton=cf,o.secondaryButtonBackgroundColor=qu,o.secondaryButtonHasShineEffect=Iu,o.secondaryButtonPosition=Vu,o.secondaryButtonState=Et,o.secondaryButtonText=Lu,o.secondaryButtonTextColor=Ru,o.sendData=Am,o.serializeInitDataQuery=va,o.serializeLaunchParamsQuery=qd,o.serializeToQuery=Zn,o.setCloudStorageItem=hi,o.setDebug=cp,o.setEmojiStatus=If,o.setEmojiStatusError=Nf,o.setEmojiStatusPromise=jf,o.setMainButtonParams=za,o.setMiniAppBackgroundColor=br,o.setMiniAppBottomBarColor=yr,o.setMiniAppHeaderColor=gr,o.setSecondaryButtonParams=Gu,o.settingsButton=lf,o.shareMessage=Cm,o.shareStory=km,o.shareURL=Xf,o.showBackButton=gs,o.showSettingsButton=oc,o.supports=ie,o.swipeBehavior=df,o.switchInlineQuery=Pm,o.targetOrigin=zo,o.themeParams=ff,o.themeParamsAccentTextColor=Sa,o.themeParamsBackgroundColor=Fe,o.themeParamsBottomBarBgColor=tr,o.themeParamsButtonColor=lt,o.themeParamsButtonTextColor=er,o.themeParamsDestructiveTextColor=$a,o.themeParamsHeaderBackgroundColor=Aa,o.themeParamsHintColor=Ca,o.themeParamsLinkColor=Ma,o.themeParamsMountError=Xa,o.themeParamsMountPromise=ur,o.themeParamsSecondaryBackgroundColor=We,o.themeParamsSectionBackgroundColor=Pa,o.themeParamsSectionHeaderTextColor=Ta,o.themeParamsSectionSeparatorColor=Ba,o.themeParamsState=wa,o.themeParamsSubtitleTextColor=Oa,o.themeParamsTextColor=qa,o.toRGB=ya,o.transformQueryUsing=Kn,o.unmountBackButton=vs,o.unmountBiometry=Gs,o.unmountClosingBehavior=ei,o.unmountLocationManager=ea,o.unmountMainButton=Ga,o.unmountMiniApp=vu,o.unmountSecondaryButton=Qu,o.unmountSettingsButton=sc,o.unmountSwipeBehavior=fc,o.unmountThemeParams=eu,o.unmountViewport=Pc,o.updateBiometryToken=Qs,o.viewport=Sf,o.viewportContentSafeAreaInsetBottom=Vr,o.viewportContentSafeAreaInsetLeft=Lr,o.viewportContentSafeAreaInsetRight=Rr,o.viewportContentSafeAreaInsetTop=Hr,o.viewportContentSafeAreaInsets=Ot,o.viewportHeight=Pt,o.viewportMountError=kc,o.viewportMountPromise=Jr,o.viewportSafeAreaInsetBottom=Fr,o.viewportSafeAreaInsetLeft=Wr,o.viewportSafeAreaInsetRight=Ur,o.viewportSafeAreaInsetTop=zr,o.viewportSafeAreaInsets=It,o.viewportStableHeight=Tt,o.viewportState=Dr,o.viewportWidth=Nr,o.wrapSafe=$,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),o}({});
//# sourceMappingURL=index.iife.js.map
